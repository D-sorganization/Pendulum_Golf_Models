# Ruff configuration for aggressive code quality

target-version = "py313"
line-length = 100

[lint]
# Enable ALL rules then selectively disable
select = ["ALL"]
ignore = [
    "D",      # Docstring checks (we check separately)
    "COM812", # Missing trailing comma (conflicts with black)
    "ISC001", # Single line implicit string concat
]

# Stricter than defaults
fixable = ["ALL"]
unfixable = []

# Exclude legacy code
exclude = [
    "archive/",
    "legacy/",
    "experimental/",
    "*/migrations/",
    "*_pb2.py",
]

[lint.per-file-ignores]
# Tests can be more relaxed
"test_*.py" = [
    "S101",   # Use of assert
    "PLR2004", # Magic numbers allowed in tests
]
"**/tests/*.py" = [
    "S101",
    "PLR2004", 
]
# Mathematical naming conventions (M_matrix, M11, etc. are standard in robotics)
# Example script - allow prints and some style issues
"python/double_pendulum.py" = [
    "N802",   # Function name should be lowercase (M_matrix is mathematical convention)
    "N806",   # Variable should be lowercase (M11, M12, etc. are matrix elements)
    "T201",   # Print statements allowed in example script
    "RET504", # Unnecessary assignments acceptable for readability
    "ICN003", # typing imports needed for scipy types
    "ANN201", # Missing return type (scipy OdeResult type complex)
    "ANN001", # Missing type annotations (scipy types)
]

[lint.mccabe]
max-complexity = 10

[lint.pylint]
max-args = 5
max-branches = 10
max-returns = 3
max-statements = 30

[lint.flake8-quotes]
inline-quotes = "double"
multiline-quotes = "double"
docstring-quotes = "double"

[lint.flake8-import-conventions]
banned-from = ["typing"]

[lint.flake8-tidy-imports]
banned-module-level-imports = ["numpy", "pandas"]  # Must import specific items